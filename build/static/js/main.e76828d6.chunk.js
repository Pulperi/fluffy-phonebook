(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){e.exports=t(42)},41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(17),c=t.n(o),u=t(18),i=t(6),l=t(7),m=t(4),s=t(3),f=t.n(s),d="/api/persons",b=function(){return f.a.get(d).then((function(e){return e.data}))},p=function(e){return f.a.post(d,e).then((function(e){return e.data}))},h=function(e,n){return f.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return f.a.delete("".concat(d,"/").concat(e))},g=(t(41),function(e){var n=e.type,t=e.text;return n>2?r.a.createElement("h3",null,t):r.a.createElement("h2",null,t)}),E=function(e){var n=e.notificationMessage,t=n.message,a={color:n.error?"red":"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return t||(a.display="none"),r.a.createElement("div",{style:a},t)},y=function(e){var n=e.label,t=e.name,a=e.value,o=e.onChange;return r.a.createElement("div",null,n," ",r.a.createElement("input",{type:"text",name:t,value:a,onChange:o}))},j=function(e){var n=e.person,t=e.removePerson,a=n.id,o=n.name,c=n.number;return r.a.createElement("div",null,r.a.createElement("a",{className:"person",href:"api/persons/".concat(a)},o," ",c," "),r.a.createElement("button",{onClick:t},"delete"))},w=function(e){var n=e.filter,t=e.handleFilterChange;return r.a.createElement(y,{label:"filter shown with",name:"filter",value:n,onChange:t})},O=function(e){var n=e.onSubmit,t=e.value,a=e.onChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,r.a.createElement(y,{label:"name:",name:"name",value:t.name,onChange:a}),r.a.createElement(y,{label:"number:",name:"number",value:t.number,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},C=function(e){var n=e.persons,t=e.nameFilter,a=e.removePerson;return r.a.createElement("div",null,n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return r.a.createElement(j,{key:e.id,person:e,removePerson:function(){return a(e.id)}})})))},x=function(){var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)({name:"",number:""}),s=Object(m.a)(c,2),f=s[0],d=s[1],y=Object(a.useState)(""),j=Object(m.a)(y,2),x=j[0],S=j[1],k=Object(a.useState)([]),P=Object(m.a)(k,2),F=P[0],M=P[1];Object(a.useEffect)((function(){b().then((function(e){o(e)}))}),[]);var N=function(e){M(e),setTimeout((function(){return M([])}),3e3)};return r.a.createElement("div",null,r.a.createElement(g,{type:2,text:"Phonebook"}),r.a.createElement(E,{notificationMessage:F}),r.a.createElement(w,{filter:x,handleFilterChange:function(e){return S(e.target.value)}}),r.a.createElement(g,{type:3,text:"Add a new"}),r.a.createElement(O,{onSubmit:function(e){var n;e.preventDefault(),0===f.name.length?N({message:"Name cannot be empty.",error:!0}):(n=f.name,0===t.filter((function(e){return e.name===n})).length?p(f).then((function(e){o([].concat(Object(u.a)(t),[e])),N({message:"Added ".concat(f.name,"."),error:!1})})).catch((function(e){N({message:e.response.data.error,error:!0})})):window.confirm("".concat(f.name," is already added to phonebook, replace the old number with a new one?"))&&h(t.filter((function(e){return e.name===f.name}))[0].id,f).then((function(e){o(t.filter((function(n){return n.id!==e.id})).concat(e)),N({message:"Updated ".concat(f.name,"."),error:!1})})).catch((function(e){N({message:"Unable to edit ".concat(f.name,"."),error:!0})}))),d({name:"",number:""})},value:f,onChange:function(e){return d(Object(l.a)(Object(l.a)({},f),{},Object(i.a)({},e.target.name,e.target.value)))}}),r.a.createElement(g,{type:3,text:"Numbers"}),r.a.createElement(C,{persons:t,nameFilter:x,removePerson:function(e){var n=t.filter((function(n){return n.id===e}))[0];n?window.confirm("Delete '".concat(n.name,"' ?"))&&(v(e).catch((function(e){N({message:"".concat(n.name," not found on server."),error:!0})})),o(t.filter((function(n){return n.id!==e}))),N({message:"".concat(n.name," removed."),error:!1})):N({message:"Person not found.",error:!0})}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.e76828d6.chunk.js.map