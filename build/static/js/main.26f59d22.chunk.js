(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){e.exports=t(41)},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(17),c=t.n(o),u=t(18),i=t(6),l=t(7),m=t(4),f=t(3),s=t.n(f),d="/api/persons",b=function(){return s.a.get(d).then((function(e){return e.data}))},v=function(e){return s.a.post(d,e).then((function(e){return e.data}))},h=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return s.a.delete("".concat(d,"/").concat(e))},g=function(e){var n=e.type,t=e.text;return n>2?r.a.createElement("h3",null,t):r.a.createElement("h2",null,t)},E=function(e){var n=e.notificationMessage,t=n.message,a={color:n.error?"red":"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return t||(a.display="none"),r.a.createElement("div",{style:a},t)},y=function(e){var n=e.label,t=e.name,a=e.value,o=e.onChange;return r.a.createElement("div",null,n," ",r.a.createElement("input",{type:"text",name:t,value:a,onChange:o}))},j=function(e){var n=e.person,t=e.removePerson,a=n.name,o=n.number;return r.a.createElement("div",null,a," ",o,r.a.createElement("button",{onClick:t},"delete"))},w=function(e){var n=e.filter,t=e.handleFilterChange;return r.a.createElement(y,{label:"filter shown with",name:"filter",value:n,onChange:t})},O=function(e){var n=e.onSubmit,t=e.value,a=e.onChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,r.a.createElement(y,{label:"name:",name:"name",value:t.name,onChange:a}),r.a.createElement(y,{label:"number:",name:"number",value:t.number,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},C=function(e){var n=e.persons,t=e.nameFilter,a=e.removePerson;return r.a.createElement("div",null,n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return r.a.createElement(j,{key:e.name,person:e,removePerson:function(){return a(e.id)}})})))},x=function(){var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)({name:"",number:""}),f=Object(m.a)(c,2),s=f[0],d=f[1],y=Object(a.useState)(""),j=Object(m.a)(y,2),x=j[0],S=j[1],k=Object(a.useState)([]),P=Object(m.a)(k,2),F=P[0],M=P[1];Object(a.useEffect)((function(){b().then((function(e){o(e)}))}),[]);var A=function(e){M(e),setTimeout((function(){return M([])}),2e3)};return r.a.createElement("div",null,r.a.createElement(g,{type:2,text:"Phonebook"}),r.a.createElement(E,{notificationMessage:F}),r.a.createElement(w,{filter:x,handleFilterChange:function(e){return S(e.target.value)}}),r.a.createElement(g,{type:3,text:"Add a new"}),r.a.createElement(O,{onSubmit:function(e){var n;e.preventDefault(),0===s.name.length?A({message:"Name cannot be empty.",error:!0}):(n=s.name,0===t.filter((function(e){return e.name===n})).length?v(s).then((function(e){o([].concat(Object(u.a)(t),[e])),A({message:"Added ".concat(s.name,"."),error:!1})})):(window.confirm("".concat(s.name," is already added to phonebook, replace the old number with a new one?"))&&h(t.filter((function(e){return e.name===s.name}))[0].id,s).then((function(e){o(t.filter((function(n){return n.id!==e.id})).concat(e)),A({message:"Updated ".concat(s.name,"."),error:!1})})).catch((function(e){o(t.filter((function(e){return e.name!==s.name}))),A({message:"".concat(s.name," not found on server."),error:!0})})),d({name:"",number:""})))},value:s,onChange:function(e){return d(Object(l.a)(Object(l.a)({},s),{},Object(i.a)({},e.target.name,e.target.value)))}}),r.a.createElement(g,{type:3,text:"Numbers"}),r.a.createElement(C,{persons:t,nameFilter:x,removePerson:function(e){var n=t.filter((function(n){return n.id===e}))[0];n?window.confirm("Delete '".concat(n.name,"' ?"))&&(p(e).catch((function(e){A({message:"".concat(n.name," not found on server."),error:!0})})),o(t.filter((function(n){return n.id!==e}))),A({message:"".concat(n.name," removed."),error:!1})):A({message:"Person not found.",error:!0})}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.26f59d22.chunk.js.map